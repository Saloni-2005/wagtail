{% extends "navigation/menu_base.html" %}
{% load wagtailcore_tags navigation_tags navigation_filters %}

{% block title %}{{ menu_item.title }}{% endblock %}

{% block site_title %}{{ menu.title }}{% endblock %}

{% block header_menu_items %}
{% get_menu "header" None request.user.is_authenticated as navigation %}
{% for item in navigation|merge_customized:menu.custom_header %}
{% if item.is_custom %}
<li>
    <a href="{{ item.url }}" {% if item.open_in_new_tab %}target="_blank" rel="noopener" {% endif %}>
        {{ item.title }}
    </a>
</li>
{% else %}
<li><a href="{{ item.url }}">{{ item.title }}</a></li>
{% endif %}
{% endfor %}
{% endblock %}

{% block footer_navigation %}
<ul class="navigation-menu">
    {% get_menu "footer" None request.user.is_authenticated as footer_nav %}
    {% for item in footer_nav|merge_customized:menu.custom_footer %}
    {% if item.is_custom %}
    <li>
        <a href="{{ item.url }}" {% if item.open_in_new_tab %}target="_blank" rel="noopener" {% endif %}>
            {{ item.title }}
        </a>
    </li>
    {% else %}
    <li><a href="{{ item.url }}">{{ item.title }}</a></li>
    {% endif %}
    {% endfor %}
</ul>
{% endblock %}

{% block menu_content %}
<!-- Display menu content if it exists -->
{% if menu.content %}
<div class="menu-description">
    <div class="menu-content-text">
        {{ menu.content|richtext }}
    </div>
    <hr class="menu-content-separator">
</div>
{% endif %}

<!-- Display menu item content -->
<div class="menu-item-content">
    {% if menu_item.content %}
    <div class="content">
        {{ menu_item.content|richtext }}
    </div>
    {% else %}
    <p class="text-muted">No content has been added to this page yet.</p>
    {% endif %}
</div>
{% endblock %}